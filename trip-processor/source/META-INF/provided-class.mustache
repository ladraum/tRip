package {{packageName}};

{{#name}}
@trip.spi.Singleton( name="{{.}}", exposedAs=trip.spi.ProducerFactory.class )
{{/name}}
{{^name}}
@trip.spi.Singleton( exposedAs=trip.spi.ProducerFactory.class )
{{/name}}
public class {{typeName}}AutoGeneratedProvider{{providerName}} implements trip.spi.ProducerFactory<{{type}}> {

	@trip.spi.Provided trip.spi.ServiceProvider provider;

	public {{type}} provide( trip.spi.ProviderContext context ) throws trip.spi.ServiceProviderException {
		try {
{{#stateless}}
			final {{type}} instance = new {{provider}}();
			provider.provideOn( instance );
			return instance;
{{/stateless}}
{{^stateless}}
		{{#serviceFor}}
			final {{serviceFor}} factoryProvider = provider.load( {{serviceFor}}.class );
		{{/serviceFor}}
		{{^serviceFor}}
			final {{provider}} factoryProvider = new {{provider}}();
			provider.provideOn( factoryProvider );
		{{/serviceFor}}
{{^expectsContext}}
			return factoryProvider.{{providerMethod}}();
{{/expectsContext}}
{{#expectsContext}}
			return factoryProvider.{{providerMethod}}( context );
{{/expectsContext}}
{{/stateless}}
		} catch( Throwable cause ) {
			throw new trip.spi.ServiceProviderException( cause );
		}
	}
}